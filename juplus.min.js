(function( $ ) {
	var pluginOptions
	$.juplus = function( options ) {
		// When the user doesn't provide ID, return script
		if ( !options.id ) {
			console.error( "No id is given!" )
			return;
		}
		// Append to the head so that google api can read this
		$( 'head' ).append(
				 '<meta name="google-signin-client_id" content="' + options.id
						+ '">' )
		// Append to the containers so that the google sign in button will appear
		$( options.container )
				.append(
						 '<div class="g-signin2" data-onsuccess="juplusCallback"></div>' )
		// Get the google api script load dynamically
		$.getScript( "https://apis.google.com/js/platform.js" );
		// Assign to use the plugin
		pluginOptions = options
	}
	
	function juplusCallback( googleUser ) {
		if ( pluginOptions.email ) {
			$( pluginOptions.email ).val( googleUser.wc.hg )
		}
		if ( pluginOptions.fullname ) {
			$( pluginOptions.fullname ).val( googleUser.wc.wc )
		}
		if ( pluginOptions.firstname ) {
			$( pluginOptions.firstname ).val( googleUser.wc.Za )
		}
		if ( pluginOptions.lastname ) {
			$( pluginOptions.lastname ).val( googleUser.wc.Na )
		}
		if ( pluginOptions.imageUrl ) {
			$( pluginOptions.imageUrl ).attr( 'src', googleUser.wc.Ph )
		}
		if ( pluginOptions.googleId ) {
			$( pluginOptions.googleId ).val( googleUser.wc.Ka )
		}
	}
}( jQuery ));
